===========================================================================
                    üöÄ FARMZILLA DEPLOYMENT OPTIONS üöÄ
===========================================================================

PREREQUISITES: AWS CLI configured, Docker running, GitHub token in .env

===========================================================================
üéØ QUICK START (Run from back_end/src/)
===========================================================================

# Complete setup (first time)
python deploy_all.py --full-setup

# Deploy apps only
python deploy_all.py --deploy-apps

# Setup CI/CD only
python deploy_all.py --setup-pipeline

# View costs
python deploy_all.py --cost-report

===========================================================================
üì¶ BACKEND DEPLOYMENT (back_end/src/)
===========================================================================

FULL DEPLOY:     python deploy.py
UPDATE ONLY:     python deploy.py --update-only
SCALE:           python deploy.py --scale [NUMBER]
STOP/START:      python deploy.py --stop / --scale 1
DELETE:          python deploy.py --delete

Config: farmzilla-cluster, 512 CPU, 1024 MB, Port 8000

===========================================================================
üåê FRONTEND DEPLOYMENT (back_end/src/)
===========================================================================

FULL DEPLOY:     python deploy_frontend.py
UPDATE ONLY:     python deploy_frontend.py --update-only
SCALE:           python deploy_frontend.py --scale [NUMBER]
STOP/START:      python deploy_frontend.py --stop / --scale 1
DELETE:          python deploy_frontend.py --delete

Config: farmzilla-frontend-cluster, 256 CPU, 512 MB, Port 80

===========================================================================
üîÑ CI/CD PIPELINE (back_end/src/)
===========================================================================

SETUP:           python setup_codepipeline.py

WORKFLOW AFTER SETUP:
1. Make code changes
2. git push origin main
3. Automatic build & deploy

Pipelines: farmzilla-backend-pipeline, farmzilla-frontend-pipeline

===========================================================================
üéõÔ∏è MASTER SCRIPT OPTIONS (back_end/src/)
===========================================================================

--full-setup      Deploy apps + setup CI/CD (recommended first time)
--deploy-apps     Deploy both backend and frontend
--deploy-backend  Deploy backend only
--deploy-frontend Deploy frontend only
--setup-pipeline  Setup CI/CD only
--cost-report     Show cost breakdown

===========================================================================
ÔøΩ COST INFO
===========================================================================

MONTHLY COSTS:
‚Ä¢ Backend: ~$12-15 (512 CPU, 1024 MB)
‚Ä¢ Frontend: ~$6-8 (256 CPU, 512 MB)
‚Ä¢ CI/CD: ~$3-5
‚Ä¢ Total: ~$25-30/month

COST SAVING:
python deploy.py --stop              # Stop backend
python deploy_frontend.py --stop     # Stop frontend
python deploy.py --scale 1           # Restart backend
python deploy_frontend.py --scale 1  # Restart frontend

===========================================================================
üö® COMMON ISSUES & SOLUTIONS
===========================================================================

‚ùå AWS credentials not configured ‚Üí Run `aws configure`
‚ùå Docker daemon not running ‚Üí Start Docker Desktop
‚ùå Service already exists ‚Üí Use --update-only flag
‚ùå GitHub token invalid ‚Üí Update GITHUB_TOKEN in .env
‚ùå Task failed to start ‚Üí Check CloudWatch logs in AWS Console

‚ùå "Waiter ServicesStable failed: Max attempts exceeded"
‚Üí Service taking too long to stabilize. Check these:

IMMEDIATE CHECKS:
1. aws ecs describe-services --cluster farmzilla-cluster --services farmzilla-service
2. aws ecs describe-tasks --cluster farmzilla-cluster --tasks [TASK-ARN]
3. Check CloudWatch logs: /ecs/farmzilla

COMMON CAUSES:
‚Ä¢ Health check failures (port 8000 not responding)
‚Ä¢ Insufficient memory/CPU (increase in .env)
‚Ä¢ Database connection issues (check RDS connectivity)
‚Ä¢ Security group blocking traffic
‚Ä¢ Task keeps restarting due to application errors

QUICK FIXES:
‚Ä¢ Increase CPU/MEMORY in .env (try CPU=1024, MEMORY=2048)
‚Ä¢ Check application logs for startup errors
‚Ä¢ Verify DATABASE_URL connection string
‚Ä¢ Ensure security group allows port 8000

‚ùå "Unknown parameter in input: lifecyclePolicy"
‚Üí ECR repository creation issue (fixed in latest scripts)
‚Ä¢ Run: python deploy_frontend.py --update-only
‚Ä¢ Or delete and recreate: aws ecr delete-repository --repository-name farmzilla-frontend --force

‚ùå "502 Bad Gateway" or Docker registry connection errors
‚Üí Docker Hub registry connectivity issues
QUICK FIXES:
‚Ä¢ Restart Docker Desktop
‚Ä¢ Wait 2-3 minutes and retry the deployment
‚Ä¢ Check internet connectivity
‚Ä¢ Run: docker system prune -f (clean Docker cache)
‚Ä¢ Alternative: docker pull nginx:alpine (test registry access)

‚ùå TypeScript compilation errors in frontend build
‚Üí "'variable' is declared but its value is never read"
QUICK FIXES:
‚Ä¢ If only using setter: const [_variable, setVariable] = useState()
‚Ä¢ Add ESLint disable comment above the line
‚Ä¢ Remove unused variables entirely if not needed

‚ùå "CodeBuild is not authorized to perform: sts:AssumeRole on service role"
‚Üí IAM role creation timing issue (AWS eventual consistency)
QUICK FIXES:
‚Ä¢ Wait 1-2 minutes and retry the deployment
‚Ä¢ Check IAM role exists: aws iam get-role --role-name [ROLE-NAME]
‚Ä¢ If role missing: Delete CodeBuild project and retry setup

‚ùå "CodePipeline is not authorized to perform AssumeRole on role"
‚Üí CodePipeline IAM role timing issue (AWS eventual consistency)
QUICK FIXES:
‚Ä¢ Wait 2-3 minutes and retry: python setup_codepipeline.py
‚Ä¢ Check role: aws iam get-role --role-name farmzilla-codepipeline-role
‚Ä¢ Manual fix: Delete pipeline in AWS Console and retry

===========================================================================
üìä MONITORING
===========================================================================

AWS CONSOLE:
‚Ä¢ ECS Services: AWS Console ‚Üí ECS ‚Üí Clusters
‚Ä¢ Logs: AWS Console ‚Üí CloudWatch ‚Üí Log groups
‚Ä¢ Pipelines: AWS Console ‚Üí CodePipeline

LOG GROUPS:
‚Ä¢ Backend: /ecs/farmzilla
‚Ä¢ Frontend: /ecs/farmzilla-frontend

HEALTH CHECKS:
‚Ä¢ Backend API: http://[IP]:8000/docs
‚Ä¢ Frontend: http://[IP]

===========================================================================
ÔøΩ KEY FILES
===========================================================================

‚Ä¢ Scripts: back_end/src/
‚Ä¢ Config: .env (project root)
‚Ä¢ Build specs: buildspec-*.yml (project root)
‚Ä¢ Frontend Docker: front_end/Dockerfile

===========================================================================